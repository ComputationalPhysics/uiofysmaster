\definecolor{headercolor}{rgb}{0.2,0.2,0.2}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt} % optional
\fancyhead[EL]{{\color{headercolor} \footnotesize \thepage \qquad \nouppercase{\leftmark}}}
\fancyhead[ER]{{%
\ifnum\value{chapter}>0
  \color{headercolor} \footnotesize Chapter \thechapter{}
\fi
}}
\fancyhead[OL]{{%
\ifnum\value{chapter}>0
\ifnum\value{section}>0
  \color{headercolor} \footnotesize Section \thesection{}
\fi
\fi%
}}
\fancyhead[OR]{{\color{headercolor} \footnotesize \nouppercase{\rightmark} \qquad \thepage}}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{%
\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{%
\markright{#1}}
% \fancyhead[R]{\thepage}

\fancypagestyle{onlypagenum}
{
  \fancyhf{}
  \fancyhead[OR]{\color{headercolor} \thepage}
  \fancyhead[EL]{\color{headercolor} \thepage}
}
\fancypagestyle{tableofcontents}
{
  \fancyhf{}
  \fancyhead[EL]{{\color{headercolor} \footnotesize \thepage \qquad \nouppercase{\leftmark}}}
  \fancyhead[OR]{{\color{headercolor} \footnotesize \nouppercase{\rightmark} \qquad \thepage}}
}

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
\hbox{}
\thispagestyle{empty}
\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}

% Fix headheight too small warning by setting it to 15pt:
\setlength{\headheight}{15pt}